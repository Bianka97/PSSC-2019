TODO:   add diagrams
        add UTs
        implement queues
        refactor some stuff to be testable